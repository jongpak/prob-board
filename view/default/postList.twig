{% extends file('layout') %}

{% block body %}
<h2 class="page-header">Posts <small> / {{ board.getTitle() }}</small></h2>

<table class="table table-hover">
    <thead>
    <tr>
        <th class="no">No.</th>
        <th class="subject">Subject</th>
        <th class="author">Author</th>
        <th class="time">Time</th>
    </tr>
    </thead>
    <tbody>
    {% for post in posts %}
    <tr>
        <td class="no">{{ post.getId() }}</td>
        <td class="subject">
            <a href="{{ readUri(post, searchQuery) }}">
                {{ post.getSubject() }}

                {% if post.getComments | length %}
                    <span class="badge" title="{{ post.getComments | length }} Comments">
                        <span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
                        <span class="hide">comments</span>
                        {{ post.getComments | length }}
                    </span>
                {% endif %}

                {% if post.getAttachemntFiles() | length %}
                    <span class="badge attachments" title="Attachments">
                        <span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>
                        <span class="hide">attachment</span>
                    </span>
                {% endif %}

                {% if post.getIsSecret() %}
                    <span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
                    <span class="hide">secret</span>
                {% endif %}
            </a>
        </td>
        <td class="author">{{ post.getAuthor() }}</td>
        <td class="time"><time datetime="{{ post.getCreatedAt() | date('c') }}">{{ post.getCreatedAt() | date('Y-M-d') }}</time></td>
    </tr>
    {% endfor %}
    </tbody>
</table>

<div class="pager">
    {{ pager | raw }}
</div>

<div class="pull-left">
<form class="form-inline" action="" method="GET">
<fieldset>
    <div class="form-group">
        <label><input type="checkbox" name="s" {{ searchQuery['s'] ? 'checked="checked"' : '' }} /> Subject</label>
        <label><input type="checkbox" name="c" {{ searchQuery['c'] ? 'checked="checked"' : '' }} /> Content</label>
        <label><input type="checkbox" name="a" {{ searchQuery['a'] ? 'checked="checked"' : '' }} /> Author</label>
    </div>

    <div class="form-group">
        <input type="text" name="q" placeholder="keyword" size="30" class="form-control" value="{{ searchQuery['q'] }}" required="required" />
        <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Search</button>
    </div>
</fieldset>
</form>
</div>

<div class="pull-right">
    <a href="{{ createUri(board) }}" class="btn btn-default"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Write</a>
</div>
{% endblock %}
